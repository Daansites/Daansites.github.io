auto complete malmberg word trainer:

async function autoTrainerLoop() {
  const delay = ms => new Promise(res => setTimeout(res, ms));

  while (true) {
    const centerX = window.innerWidth / 2;
    const centerY = window.innerHeight / 2;

    // Step 1: Click 100px below center
    const click1 = document.elementFromPoint(centerX, centerY + 100);
    if (click1 instanceof HTMLElement && typeof click1.click === 'function') click1.click();
    await delay(700);

    // Step 2: Get last nested span (English)
    const spans = Array.from(document.querySelectorAll('p.eb-content-block.large.ng-star-inserted span.eb-content-block-mime-type-text-plain.ng-star-inserted'));
    const englishSpan = spans.at(-1);
    const copiedText = englishSpan?.textContent.trim() || '';
    await delay(700);

    // Step 3: Click 100px below center again
    const click2 = document.elementFromPoint(centerX, centerY + 100);
    if (click2 instanceof HTMLElement && typeof click2.click === 'function') click2.click();
    await delay(700);

    // Step 4: Click center of screen
    const click3 = document.elementFromPoint(centerX, centerY);
    if (click3 instanceof HTMLElement && typeof click3.click === 'function') click3.click();
    await delay(700);

    // Step 5: Clear and paste text
    const active = document.activeElement;
    if (active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA')) {
      active.value = '';
      active.dispatchEvent(new Event('input', { bubbles: true }));
      await delay(100);
      active.value = copiedText;
      active.dispatchEvent(new Event('input', { bubbles: true }));
    }
    await delay(700);

    // Step 6: Click "correct" button
    const correctBtn = document.querySelector('button.vo-action.vo-large-icon.vo-safe');
    if (correctBtn instanceof HTMLElement && typeof correctBtn.click === 'function') correctBtn.click();
    await delay(1200);
  }
}

autoTrainerLoop();
